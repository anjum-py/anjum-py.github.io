<!doctypehtml><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1 name=viewport><title>
    Building a Geolocation API with FastAPI and MaxMind GeoLite2 Databases | Project Overview
  </title><meta content="Learn how to build and deploy a highly scalable geolocation API powered by FastAPI and MaxMind GeoLite2 databases on Google Cloud's Cloud Run. This article guides you through the automated deployment process using Cloud Development Kit for Terraform (CDKTF), ensuring efficient infrastructure management."name=description><link crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css integrity=sha512-SgaqKKxJDQ/tAUAAXzvxZz33rmn7leYDYfBP+YoMRSENhf3zJyx3SBASt/OfeQwBHA1nxMis7mM3EV/oYT6Fdw== referrerpolicy=no-referrer rel=stylesheet><link crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css integrity=sha512-9YHSK59/rjvhtDcY/b+4rdnl0V4LPDWdkKceBl8ZLF5TB6745ml1AfluEU6dFWqwDw9lPvnauxFgpKvJqp7jiQ== referrerpolicy=no-referrer rel=stylesheet><link crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/solid.min.css integrity=sha512-yDUXOUWwbHH4ggxueDnC5vJv4tmfySpVdIcN1LksGZi8W8EVZv4uKGrQc0pVf66zS7LDhFJM7Zdeow1sw1/8Jw== referrerpolicy=no-referrer rel=stylesheet><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href=https://fonts.googleapis.com/css2?family=Montserrat&family=Open+Sans&display=swap rel=stylesheet><link href=/static/css/tailwind.css rel=stylesheet><link href=/static/css/prism.css rel=stylesheet><script defer src=/static/js/turbo/turbo.js></script><script defer src=/static/js/stimulus/stimulus.js></script><script data-manual src=/static/js/prism/prism.js></script><body class="antialiased container h-full max-w-screen-2xl mx-auto overflow-hidden bg-slate-50"><div class="h-full w-full"><div class="absolute h-full w-full right-0 left-0"><div class="flex absolute h-full w-full"><div class="flex flex-col h-full items-center justify-center container lg:max-w-screen-lg lg:mt-20 mx-auto"><div class="flex relative h-full w-full"><div class="flex flex-col w-full lg:flex-row"><div><div class="flex flex-col p-4 lg:items-center lg:space-y-4 lg:pt-10 mb-6 lg:px-16"><div class="w-16 h-16"><svg viewbox="0 0 182 182"fill=none xmlns=http://www.w3.org/2000/svg><path class="fill-slate-700 stroke-none"d="M122.5 81.32v36.45c0 1.9.4 3.55 1.23 4.94l.01.02.01.01a15.75 15.75 0 0 0 3.23 3.43l.03.02.02.01c1.34.8 2.75 1.41 4.23 1.81a19 19 0 0 0 10.22-.2h.03c2-.66 3.79-1.53 5.4-2.6l.02-.01c1.6-1.2 2.94-2.62 4.02-4.23v-.01a10.75 10.75 0 0 0 1.64-5.73v-.5h-.5c-1.36 0-2.66.27-3.9.81-1.06.4-2.12.93-3.18 1.6a81.68 81.68 0 0 1-3.26 1.53c-.97.36-2.14.55-3.52.55-2.96 0-5.05-.45-6.37-1.28-1.08-.77-1.73-2.49-1.73-5.45 0-5.58.33-11.03.98-16.34.65-5.5.98-11.05.98-16.67 0-.89.06-1.97.19-3.27.13-1.34.07-2.62-.2-3.84A5.45 5.45 0 0 0 130.6 69c-.77-1.05-1.98-1.54-3.5-1.54-.31 0-.8.07-1.42.2-.53 0-1 .07-1.35.24l-.03.02-.02.02a35.76 35.76 0 0 0-9.11 8.71l-.01.01c-2.35 3.4-4.58 7-6.67 10.78a854.23 854.23 0 0 0-6.25 11.14v.01a51.43 51.43 0 0 1-6.1 9.22v-.2c0-5.06.33-9.98.98-14.78.65-4.84.98-9.74.98-14.71 0-1.42.07-3.17.2-5.25.13-2.24 0-4.36-.4-6.36a10.19 10.19 0 0 0-2.05-5.1c-1.16-1.6-3.03-2.35-5.47-2.35-1.46 0-3.12.72-4.97 2.04a32.31 32.31 0 0 0-5.35 4.36 150.15 150.15 0 0 0-4.5 4.7c-1.31 1.44-2.15 2.34-2.53 2.72l-.02.02-.02.02c-.52.65-1.42 1.75-2.73 3.31-1.3 1.57-2.68 3.34-4.11 5.3-1.43 1.81-2.8 3.57-4.1 5.26-.65.78-1.2 1.46-1.62 2.02.02-1.3.08-2.97.17-5 .13-3.16-.06-6.26-.59-9.28-.4-3.17-1.26-5.9-2.6-8.18a6.96 6.96 0 0 0-2.4-2.81c-1.01-.65-2.18-.96-3.5-.96-1.56 0-3.4.63-5.52 1.82a54.88 54.88 0 0 0-6.7 4.53 69.74 69.74 0 0 0-6.89 6.1 133.7 133.7 0 0 0-6.07 6.47c-1.83 2.1-3.28 4-4.34 5.72-.6.85-1.05 1.6-1.35 2.26-.3.64-.5 1.22-.5 1.72v.78c0 .18.08.32.12.39a8.76 8.76 0 0 0 .81.95l.98.97.04.04.04.02c.4.27 1.07.67 1.98 1.2h.03c.4.2.74.35 1.01.43.13.04.28.07.42.07.13 0 .34-.03.51-.2L46.34 75.6l2.89-1.6 1.58 6.34v.52c0 4.54-.2 9.02-.58 13.43-.4 4.3-.85 8.65-1.37 13.08-.52 4.3-.97 8.6-1.37 12.9-.39 4.31-.58 8.69-.58 13.13v.5h.5c2.13 0 3.82-.4 4.98-1.27 1.16-.87 2.05-2.4 2.7-4.51.42-.85 1.08-2.77 1.97-5.7v-.01c.92-3.12 1.9-6.37 2.93-9.76 1.17-3.5 2.21-6.76 3.13-9.76a70.5 70.5 0 0 1 2.05-5.46l.01-.01.2-.18.52-.57c.43-.5 1.04-1.24 1.82-2.21a1595.26 1595.26 0 0 1 12.5-15.43c2.34-2.87 4.23-5.21 5.67-7.04l.03-.04.02-.04c.1-.2.3-.47.69-.85a4.41 4.41 0 0 1 .5-.44c.14 0 .3-.03.44-.1l.14-.1h.14l.14-.14a.35.35 0 0 1 .06-.05c.44 0 .8.21 1.12.73v.02l.02.03c.34.44.57 1.01.7 1.73v.05l.02.05c.23.59.36 1.24.36 1.97V76.56a75 75 0 0 1-.59 9.32c-.39 3.12-.84 6.3-1.36 9.55-.52 3.13-.98 6.26-1.37 9.4a76 76 0 0 0-.6 9.43V117.19c0 1.45.08 3.02.2 4.73v.02l.01.02c.27 1.6.74 3.09 1.41 4.44.36.72.84 1.28 1.46 1.66.6.39 1.32.57 2.12.57 1.67 0 3.36-1.2 5.07-3.31l.01-.01a78.39 78.39 0 0 0 5.31-8.06c1.83-3.14 3.66-6.67 5.49-10.58 1.95-3.9 3.83-7.6 5.65-11.12 1.95-3.5 3.77-6.62 5.45-9.34 1.47-2.2 2.8-3.82 3.96-4.88Z"/><circle class="stroke-slate-900 stroke-2"cx=91 cy=91 r=90.5 /></svg></div><div class="inline-flex flex-row space-x-4 lg:flex-col lg:space-x-0 lg:space-y-2"><a class="text-md font-semibold"href=/>home</a><a class="text-md font-semibold"href=/about/>about</a><a class="text-md font-semibold"href=/projects/>projects</a><a class="text-md font-semibold"href=/notes/>notes</a></div></div></div><div class="overflow-auto scroll-smooth flex flex-col lg:max-w-[800px] pb-20"><div class="p-2 max-w-[65ch]"><div><h1 class="lg:text-6xl text-5xl font-bold py-6">Geolocation API</h1><hr><div class="flex justify-between flex-wrap"><div><p class="text-sm text-slate-400">Published - 2023-06-07<p class="text-sm text-slate-400">Updated - 2023-06-18</div><div class="flex items-center space-x-4"><div><a class="inline-flex items-center space-x-1 text-slate-500"href=https://github.com/anjum-py/geolocation> <i class="fa-brands fa-github text-lg"></i> <span class=text-base>GitHub</span> </a></div><div><a class="inline-flex items-center space-x-1 text-slate-500"href=https://geolocation-api-zuravksy3a-el.a.run.app/docs> <i class="fa-solid fa-circle-nodes text-lg"></i> <span class=text-base>OpenAPI</span> </a></div></div></div></div><div class="flex flex-col space-y-4 my-10 flex-auto"><div class=block-h2><h2 class=text-2xl id=about-this-project>About this project</h2></div><div class=block-richtext><div class=prose><p data-block-key=yoe21>In this portfolio project, I built an API that looks up IP addresses from MaxMind GeoLite2 databases. This API is powered by FastAPI and MaxMind GeoLite2 databases and provides one endpoint. If the request includes a <code>POST</code> body with <code>ip_address,</code> the endpoint will look up the requested IP address or the endpoint will lookup the origin IP address of the request as long as this public IP address is in MaxMind databases.<p data-block-key=8gb68>The main focus of this project was to learn and understand the intricacies involved in automated deployment of a microservice to Google Cloud's managed, serverless containers platform, Cloud Run. I used Cloud Development Kit for Terraform (CDKTF) to automate deployment of the required infrastructure components to secure and run our microservice.<p data-block-key=3o65c>On this page I have made an attempt to explain how various tools and technologies are used to build and deploy this project. Your feedback, suggestions, and questions are very valuable to me. Please do not hesitate to share your views.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=demo>Demo</h2></div><div class=block-html><div><div class="flex flex-col space-y-4"data-controller=geolocation><input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500"placeholder="Enter IP address"data-geolocation-target=input><button class="shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded"data-action="click->geolocation#fetchData"type=button>Look up IPv4 or IPv6</button><p data-geolocation-target=ipAddress><pre><code class=language-json data-geolocation-target=dataHolder></code></pre></div></div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=what-problems-does-this-project-solve>What problems does this project solve?</h2></div><div class=block-richtext><div class=prose><p data-block-key=gvpgx>The API looks up the visitor's IP address and use MaxMind GeoLite2 City databases to return data about the visitor's location. You can learn more about the databases <a href=https://dev.maxmind.com/geoip>here.</a><p data-block-key=qq3d>Geolocation data can be used to customize the user experience, target marketing, detect fraud, improve security, and comply with regulations.<p data-block-key=oo78>I have used the geolocation data with the <a href=https://intl-tel-input.com/examples/lookup-country.html>International Telephone Input</a> library to enhance the user experience by formatting international phone numbers.<p data-block-key=33cg8>However, the main intention behind this project is to build something small but useful for my portfolio that showcases my ability to automate building, testing, and deploying highly scalable serverless cloud native applications to Google Cloud Platform.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=how-to-build-and-deploy>How to build and deploy</h2></div><div class=block-richtext><div class=prose><p data-block-key=79b2b>The project requires a container image as its basic component. The Dockerfile in the project root uses a multi-stage build to create a lightweight image. This image downloads updated MaxMind GeoLite2 databases and includes them. Once we have the image, we can deploy it to any platform that supports containerized services. In this case, I will explain how I deployed it to Google Cloud Platform's Cloud Run using Cloud Development Kit for Terraform (CDKTF).<p data-block-key=asso6>We will be using cloud console Cloud Shell to setup everything.<p data-block-key=as67n>To ensure separation of environment configuration data, we will utilize environment variables.<p data-block-key=30sig>CDKTF will handle the deployment of all necessary components on Google Cloud.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=create-a-maxmind-developer-account>Create a MaxMind Developer Account</h2></div><div class=block-richtext><div class=prose><p data-block-key=33vvb>To set up automatic database updates within our container, we need to create a MaxMind account and obtain a license key. To do this:<ol><li data-block-key=dmafn>Go to the MaxMind website and <a href=https://www.maxmind.com/en/geolite2/signup>sign up</a> for a developer account.<li data-block-key=301ka>Check your email for a verification link. Click on the link to set a password for your account.<li data-block-key=2hvdg>Log in to your MaxMind account. You will receive a verification code via email. Copy and paste the verification code to complete the authentication process.<li data-block-key=dosrp>On your account dashboard, click on "<b>Manage License Keys</b>" in the left sidebar.<li data-block-key=sli9>Click on "<b>Create New License Key</b>" and enter a name for your license key.<li data-block-key=66ap9>Click on "<b>Create</b>" to generate your license key.</ol><p data-block-key=e6eb7>Keep your license key window open as we will need it shortly.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=login-to-google-cloud-account>Login to Google Cloud Account</h2></div><div class=block-richtext><div class=prose><p data-block-key=6nqlj>Before we begin, please make sure that you are logged in to your Google Cloud account and have a valid billing account. You may be charged for using Google Cloud services, but the services we will be deploying have a generous free tier that allows us to test our deployment without incurring any cost.<p data-block-key=2rh0o>The free tier includes a set of Google Cloud services that you can use for free, up to certain usage limits. If you exceed the usage limits, you will be charged for the additional usage.<p data-block-key=9t5bd>The free tier is a great way to try out Google Cloud services and to test our deployments without incurring any cost.<p data-block-key=crfoe>If you do not want to continue using the service, our CDKTF implementation makes it very easy to delete the deployed resource in just one command.<ol><li data-block-key=dp4jj>Go to the <a href=https://console.cloud.google.com/>Google Cloud Platform website</a>.<li data-block-key=t7p1>Click on the <b>Sign in</b> button.<li data-block-key=cie1r>Enter your Google Account email address and password.<li data-block-key=a7tab>Click on the <b>Sign in</b> button.</ol><p data-block-key=6bv6k>If you don't have a Google Account, you can create one by clicking on the <b>Create account</b> button.<p data-block-key=7ibun>Once you are logged in, you will be taken to the Google Cloud Platform console. From here, you can start using Google Cloud services.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=create-a-project-in-google-cloud>Create a project in Google Cloud</h2></div><div class=block-richtext><div class=prose><p data-block-key=i4e49>To create a new Google Cloud project for deploying our geolocation service, follow these steps:<ol><li data-block-key=arc1q>Click on the <b>Select Project</b> button located in the top-left corner of the GCP Console.<li data-block-key=2eb0l>Click on "<b>New Project</b>" to create a new project.<li data-block-key=12sds>In the "<b>Project Name</b>" field, enter "<b>geolocation</b>."<li data-block-key=50eh3>Make a note of the random project ID that Google Cloud assigns. This is required to be unique globally, so Google Cloud assigns a random number to the name.<li data-block-key=fk31b>Click "Create."<li data-block-key=15d0a>Click on the <b>Select Project</b> button and select the newly created project to make it the active project.</ol><p data-block-key=4rpu5>To learn more about creating a project on Google Cloud Platform, follow this <a href=https://cloud.google.com/resource-manager/docs/creating-managing-projects#creating_a_project>guide</a>.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=start-google-cloud-shell>Start Google Cloud Shell</h2></div><div class=block-richtext><div class=prose><ol><li data-block-key=oo2r4>Go to the <a href=https://console.cloud.google.com/>Google Cloud Console</a>.<li data-block-key=10lj4>Click the <b>Activate Cloud Shell</b> button at the top of the page.<li data-block-key=6g601>A new Cloud Shell session will open.</ol></div></div><div class=block-h3><h3 class=text-xl id=set-the-default-project>Set the default project</h3></div><div class=block-richtext><div class=prose><p data-block-key=gx1hz>Run the following command to set the newly created project in the previous set as our current project.</div></div><div class=block-code><div class=highlight><pre><span></span>gcloud<span class=w> </span>config<span class=w> </span><span class=nb>set</span><span class=w> </span>project<span class=w> </span>PROJECT_ID
</pre></div></div><div class=block-alert><div class="inline-flex bg-amber-200 p-4 space-x-4 w-full"><div><i class="fa-solid fa-bell text-xl text-amber-800"></i></div><div class=prose><p data-block-key=m75e7>Make sure to replace the PROJECT_ID with your project id.</div></div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=fork-and-clone-the-git-repository>Fork and Clone the Git Repository</h2></div><div class=block-richtext><div class=prose><p data-block-key=an96k>We need to fork the <a href=https://github.com/anjum-py/geolocation>Git repository</a> because Cloud Build only allows connecting to repositories from our own GitHub account, even if the repository is public. Forking a repository creates a copy of it in our own account, which we can then clone to our Cloud Shell environment. Once the repository is cloned, we can connect it to our Cloud Build trigger.<p data-block-key=ag3op>Here is a more detailed explanation of the steps involved:<ol><li data-block-key=9ik9g>Go to the <a href=https://github.com/anjum-py/geolocation>GitHub repository</a>.<li data-block-key=9qvh6>Click the <b>Fork</b> button in the top right corner of the page.<li data-block-key=9cvbq>This will create a copy of the repository in our own GitHub account.<li data-block-key=7840e>Once the repository has been forked, click the <b>Clone</b> button.<li data-block-key=f7u9q>In the <b>Clone with HTTPs</b> section, copy the URL of the repository.<li data-block-key=lhpn>Open a terminal window in our Cloud Shell environment.<li data-block-key=fdha6>Type the following command to clone the repository: <code>git clone &LTURL></code></ol><p data-block-key=dc95c>Replace <code>&LTURL></code> with the URL that we copied in step 5.<p data-block-key=if3h>The repository will be cloned to our Cloud Shell environment.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=connect-git-repository>Connect git repository</h2></div><div class=block-richtext><div class=prose><p data-block-key=vwi6q>To connect the Cloud Build trigger to your GitHub account, follow these steps:<ol><li data-block-key=1odhl>Go to the <a href=https://console.cloud.google.com/cloud-build/repositories/><b>Repositories</b></a> page in the <b>Google Cloud Console</b>.<li data-block-key=2r317>Scroll to the bottom of the page and click <b>Connect Repository</b>.<li data-block-key=6mrse>Leave the <b>Region</b> as <b>global</b> and make sure <b>GitHub</b> is selected.<li data-block-key=1msqf>Click <b>Continue</b>.<li data-block-key=9qffa>If you are not already logged in to GitHub, you will be prompted to do so.<li data-block-key=32trp>Once you are logged in, click <b>Authorize Google Cloud Build by GoogleCloudBuild</b>.<li data-block-key=44gac>Click <b>Connect</b> to connect your repository.</ol><p data-block-key=1tr1f>Do not create a trigger yet. We will do it using cdktf.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=create-env-file>Create .env file</h2></div><div class=block-richtext><div class=prose><p data-block-key=lagp4>Our CDKTF stacks depend on values from <code>.env</code> file for setting up our infrastructure<p data-block-key=ddd93>To set up <code>.env</code> file, follow these steps:<ol><li data-block-key=7krge>Click the <b>Activate Cloud Shell</b> button at the top of the page.<li data-block-key=ugeq>Wait for the Cloud Shell session to open.<li data-block-key=eu95n>Click "<b>Open Editor</b>" to open file editor.<li data-block-key=fb5f3>Copy the contents of the <code>example_env.txt</code> file.<li data-block-key=67ium>Create a new file and paste the copied content.<li data-block-key=9ml7i>Save the file as <code>.env</code> in the root directory of your cloned repository.<li data-block-key=9i8lm>Find the random numeric ID assigned to your project ID by Google and set it to <code>RANDOM_ID</code> variable.<li data-block-key=3ct94>Set your preferred Google Cloud region to variable <code>REGION_PREFERRED</code>.<li data-block-key=1m62v>Set the URL of your forked repository.<li data-block-key=f0i9i>If you will be using this API from a front end, set the <code>FASTAPI_CORS_ORIGINS</code> variable accordingly.<li data-block-key=7vnud>Find the account ID and license key of your MaxMind account and assign these values to <code>GEOIPUPDATE_ACCOUNT_ID</code> and <code>GEOIPUPDATE_LICENSE_KEY</code> environment variables respectively.</ol><p data-block-key=4vqpj>Be sure to remove any unwanted spaces after the equal sign or after the variable value.<p data-block-key=8h1no>Your <code>.env</code> file is now configured and you are ready to deploy your Cloud Run service.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=run-cloudshell-script>Run cloudshell script</h2></div><div class=block-richtext><div class=prose><p data-block-key=8cp7m>After configuring the environment variables, we can proceed with deploying our Cloud Run service. However, prior to that, we need to prepare the Cloud Shell environment by installing a few necessary components.<p data-block-key=350t6>Initially, I began working on a detailed guide for setting up the Cloud Shell VM. However, I realized that a simple shell script would be more beneficial and user-friendly for everyone involved.<p data-block-key=5s676>Consequently, I went ahead and created a shell script that handles the setup and deployment of our foundational CDKTF stacks.<p data-block-key=5dd9k>Make sure you are in the project root directory and run <code>cloudshell.sh</code> script.</div></div><div class=block-code><div class=highlight><pre><span></span><span class=c1># make sure we are in the right directory </span>
<span class=nb>cd</span><span class=w> </span>~/geolocation
./cloudshell.sh
</pre></div></div><div class=block-richtext><div class=prose><p data-block-key=oxv8v>If prompted, select <code>Authorize</code> to continue.<p data-block-key=ahj4n>If you're running this script for the first time, it will require some time to configure pyenv, python, poetry, cdktf-cli, and obtain the CDKTF provider code. The shell script proceeds to deploy our foundational infrastructure.<p data-block-key=elftn>At this point, we will not be able to deploy our Cloud Run service as we still do not have a container image created. To create a container image, we will have to manually initiate the initial build. This is required for the first time and for subsequent runs, Cloud Build will automatically update the Cloud Run revision.<p data-block-key=caogg>I will try and create an additional video explaining the layout of the components, as well as the reasons behind having three stacks and why it was not possible to accomplish everything in a single step. However, for now, let's focus solely on the deployment process.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=deployment-complete>Deployment complete</h2></div><div class=block-richtext><div class=prose><p data-block-key=t2w7h>At this stage, we should have a running Cloud Run revision for our geolocation service. You can check the status of our deployed Cloud Run service <a href=https://console.cloud.google.com/run>here</a>. Click on the service link to open the Cloud Run page and access the url the service is hosted on.<p data-block-key=1vul8>Also, check for configured weekly schedule to trigger our Cloud Build <a href=https://console.cloud.google.com/cloudscheduler>here</a>. So, every week, our Cloud Build will get triggered and rebuild the image with updated MaxMind GeoLite2 databases and deploy the new Cloud Run revision.<p data-block-key=420me>It took quite a bit of work to reach here, but from now on, automation will take over. I have also added tests to the Cloud Build pipeline. If the tests fail, Cloud Build will stop the build pipeline on error and will not continue.</div></div><div class=block-gap><div class=h-[50px]></div></div><div class=block-h2><h2 class=text-2xl id=summary>Summary</h2></div><div class=block-richtext><div class=prose><p data-block-key=ifcna>I learnt the importance of automating application deployment and ensuring its efficient and uninterrupted availability. Regardless of an API's specific functionality, the overall workflow and patterns involved in building, testing, deploying, and securing a serverless, cloud-native Python application remain mostly the same, regardless of size.<p data-block-key=7ccce>Automation streamlines deployment by reducing errors and saving time. It allows for seamless updates and feature releases to keep the application up-to-date and adaptable to user needs.<p data-block-key=2dq1i>Continuous availability is crucial. Using Google Cloud Platform's fully managed serverless Cloud Run service for containers spin up as many containers as required without much work from our side. When there is no load, all containers are removed.<p data-block-key=8ke31>Securing a serverless, cloud-native Python application is critical. Google Cloud IAM (Identity and Access Management) service accounts can be used to manage access control and permissions. IAM provides granular control over resource access and actions, safeguarding sensitive data and preventing unauthorized access.<p data-block-key=3497m>By understanding and applying these principles and best practices, we can establish a strong foundation for building and maintaining successful serverless, cloud-native Python applications, regardless of their size. The core workflow and patterns provide a reliable framework for efficient deployment, continuous availability, and enhanced security.</div></div></div></div></div></div></div></div></div></div>